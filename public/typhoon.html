<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typhoon Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            --accent-gradient: linear-gradient(135deg, #4ECDC4 0%, #FF6B6B 100%);
            --message-gradient: var(--primary-gradient);
            --bot-message-bg: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Prompt', sans-serif;
            background: var(--primary-gradient);
            background-attachment: fixed;
            transition: all 0.3s ease;
        }

        .chat-container {
            width: 95%;
            max-width: 1000px;
            height: 90vh;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .chat-header {
            background: var(--primary-gradient);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: 600;
        }

        .chat-messages {
            flex-grow: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
            background: rgba(255, 255, 255, 0.5);
        }

        .message {
            max-width: 80%;
            padding: 16px 20px;
            border-radius: 16px;
            font-size: 16px;
            line-height: 1.5;
            position: relative;
            animation: fadeIn 0.3s ease;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .message::after {
            content: attr(data-time);
            position: absolute;
            bottom: -20px;
            font-size: 12px;
            color: rgba(0, 0, 0, 0.5);
        }

        .user-message {
            align-self: flex-end;
            color: white;
            background: var(--message-gradient);
            border-bottom-right-radius: 4px;
        }

        .user-message::after {
            right: 8px;
        }

        .bot-message {
            align-self: flex-start;
            background: var(--bot-message-bg);
            border-bottom-left-radius: 4px;
        }

        .bot-message::after {
            left: 8px;
        }

        .input-container {
            display: flex;
            gap: 12px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        #user-input {
            flex-grow: 1;
            padding: 16px 24px;
            border: none;
            border-radius: 100px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 
                0 2px 6px rgba(0, 0, 0, 0.05),
                inset 0 0 0 1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        #user-input:focus {
            outline: none;
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.1),
                inset 0 0 0 1px var(--primary-color, rgba(0, 0, 0, 0.2));
            background: white;
        }

        #send-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 16px 32px;
            border: none;
            border-radius: 100px;
            background: var(--primary-gradient);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .loading {
            display: none;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            color: rgba(0, 0, 0, 0.6);
            font-size: 14px;
        }

        /* Scrollbar styling */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Smooth transitions */
        .chat-container,
        .message,
        #user-input,
        #send-button {
            transition: all 0.3s ease;
        }

        /* Role-specific themes with improved gradients */
        .theme-general {
            --primary-gradient: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);
            --message-gradient: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);
            --bot-message-bg: rgba(67, 206, 162, 0.1);
        }

        .theme-business {
            --primary-gradient: linear-gradient(135deg, #36D1DC 0%, #5B86E5 100%);
            --message-gradient: linear-gradient(135deg, #36D1DC 0%, #5B86E5 100%);
            --bot-message-bg: rgba(54, 209, 220, 0.1);
        }

        .theme-chef {
            --primary-gradient: linear-gradient(135deg, #FF9966 0%, #FF5E62 100%);
            --message-gradient: linear-gradient(135deg, #FF9966 0%, #FF5E62 100%);
            --bot-message-bg: rgba(255, 153, 102, 0.1);
        }

        .theme-fortune {
            --primary-gradient: linear-gradient(135deg, #834d9b 0%, #d04ed6 100%);
            --message-gradient: linear-gradient(135deg, #834d9b 0%, #d04ed6 100%);
            --bot-message-bg: rgba(131, 77, 155, 0.1);
        }

        .theme-music {
            --primary-gradient: linear-gradient(135deg, #FF1744 0%, #FF4081 100%);
            --message-gradient: linear-gradient(135deg, #FF1744 0%, #FF4081 100%);
            --bot-message-bg: rgba(255, 23, 68, 0.1);
        }

        .theme-virtual-partner {
            --primary-gradient: linear-gradient(135deg, #FF6B6B 0%, #FFC6C6 100%);
            --message-gradient: linear-gradient(135deg, #FF6B6B 0%, #FFC6C6 100%);
            --bot-message-bg: rgba(255, 107, 107, 0.1);
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏° theme ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö models */
        .model-typhoon {
            --model-gradient: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
        }

        .model-gemini {
            --model-gradient: linear-gradient(135deg, #A6C1EE 0%, #FBC2EB 100%);
        }

        @media (max-width: 1200px) {
            .chat-container {
                width: 95%;
                max-width: 900px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .chat-container {
                width: 100%;
                height: 100vh;
                border-radius: 15px;
            }

            .chat-header {
                font-size: 20px;
                padding: 15px;
            }

            .message {
                max-width: 85%;
                padding: 12px 16px;
                font-size: 15px;
            }

            #send-button span {
                display: none;
            }

            #send-button {
                padding: 12px;
                min-width: 45px;
            }

            .input-container {
                padding: 12px;
                gap: 10px;
            }

            #user-input {
                padding: 12px 15px;
                font-size: 15px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 0;
            }

            .chat-container {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }

            .chat-header {
                font-size: 18px;
                padding: 12px;
            }

            .chat-messages {
                padding: 12px;
            }

            .message {
                max-width: 90%;
                padding: 10px 14px;
                font-size: 14px;
                line-height: 1.4;
            }

            .input-container {
                padding: 8px;
                gap: 8px;
            }

            #user-input {
                font-size: 14px;
                padding: 10px 12px;
            }

            #send-button {
                padding: 10px;
                min-width: 40px;
            }
        }

        @media (max-height: 600px) and (orientation: landscape) {
            .chat-container {
                height: 100vh;
                border-radius: 0;
            }

            .chat-header {
                padding: 8px;
                font-size: 16px;
            }

            .chat-messages {
                padding: 8px;
            }

            .message {
                padding: 8px 12px;
                margin-bottom: 8px;
            }

            .input-container {
                padding: 6px;
            }

            #user-input {
                padding: 8px 12px;
            }

            #send-button {
                padding: 8px;
            }
        }

        @media (min-width: 768px) and (max-width: 1024px) {
            .chat-container {
                width: 90%;
                max-width: 800px;
                height: 85vh;
            }

            .message {
                max-width: 75%;
            }

            .input-container {
                padding: 15px;
            }
        }

        .bot-message br {
            display: block;
            margin: 8px 0;
            content: "";
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <!-- Header content will be inserted by JavaScript -->
        </div>
        
        <div class="chat-messages" id="chat-messages">
            <!-- Messages will be inserted here -->
        </div>

        <div class="loading" id="loading">
            <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö...</span>
            <div class="loading-dots"></div>
        </div>

        <div class="input-container">
            <input 
                type="text" 
                id="user-input" 
                placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." 
                autocomplete="off"
            >
            <button id="send-button">
                <span>‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</span>
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <script>
        let requestCount = 0;
        const MAX_REQUESTS_PER_DAY = 20;
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const loading = document.getElementById('loading');

        let conversationHistory = [
            {
                role: "system",
                content: createSystemPrompt(getUrlParams())
            }
        ];

        function getTimeString() {
            return new Date().toLocaleTimeString('th-TH', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        }

        function formatMessage(message) {
            message = message.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
            
            let lines = message.split('\n');
            let formattedMessage = '';
            let inList = false;
            
            for (let i = 0; i < lines.length; i++) {
                let line = lines[i].trim();
                
                if (/^\d+\.\s/.test(line)) {
                    formattedMessage += line + '\n';
                    continue;
                }
                
                if (line.startsWith('- ')) {
                    formattedMessage += line + '\n';
                    continue;
                }
                
                if (line.startsWith('* ')) {
                    formattedMessage += '- ' + line.substring(2) + '\n';
                    continue;
                }
                
                if (line) {
                    formattedMessage += line + '\n';
                }
            }
            
            return formattedMessage.trim();
        }

        function addMessage(text, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            // ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            let formattedText = text;
            
            // ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô 1. 2. 3.) ‡πÉ‡∏´‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà
            formattedText = formattedText.replace(/(\d+\.\s+)/g, '<br>$1');
            
            // ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ - ‡∏´‡∏£‡∏∑‡∏≠ ‚Ä¢ ‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà
            formattedText = formattedText.replace(/([‚Ä¢\-]\s+)/g, '<br>$1');
            
            // ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ bullet points (‡πÄ‡∏ä‡πà‡∏ô -, ‚Ä¢, *, ‚ó¶) ‡πÉ‡∏´‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà
            formattedText = formattedText.replace(/([-‚Ä¢*‚ó¶]\s+)/g, '<br>$1');

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° padding ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà
            formattedText = formattedText.replace(/<br>/g, '<br>&nbsp;&nbsp;');

            // ‡∏ï‡∏±‡∏î <br> ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡πâ‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏≠‡∏Å
            formattedText = formattedText.replace(/^<br>/, '');
            
            messageDiv.innerHTML = formattedText;
            messageDiv.setAttribute('data-time', getTimeString());
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                userName: params.get('userName') || 'Oppabank',
                modelName: params.get('modelName') || 'Typhoon',
                roleName: params.get('roleName') || 'General Assistant',
                roleIcon: params.get('roleIcon') || 'ü§ñ',
                language: params.get('language') || 'th',
                primaryColor: params.get('primaryColor'),
                accentColor: params.get('accentColor'),
                backgroundGradient: params.get('backgroundGradient')
            };
        }

        function createSystemPrompt(params) {
            const lang = params.language;
            const roleName = params.roleName;

            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô role ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö
            if (roleName === '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ' || roleName === 'General Assistant') {
                if (lang === 'en') {
                    return `You are a helpful AI assistant that can help with any topic.

CRITICAL INSTRUCTIONS:
1. ALWAYS respond in English ONLY, even when users write in Thai
2. You can understand both Thai and English inputs
3. You can answer questions about any topic
4. If users ask about your role, duties, or capabilities:
   - Explain that you are a general AI assistant who can help with various topics
   - Highlight your ability to understand context and provide relevant information
   - Emphasize your commitment to being helpful and informative
5. Maintain professional and friendly communication style
6. Be helpful and informative in your responses`;
                } else {
                    return `‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢ AI ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á

‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:
1. ‡∏ï‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
2. ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠
3. ‡∏´‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
   - ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢ AI ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏î‡πâ‡∏≤‡∏ô
   - ‡πÄ‡∏ô‡πâ‡∏ô‡∏¢‡πâ‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ö‡∏£‡∏¥‡∏ö‡∏ó‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
   - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡πà‡∏á‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå
4. ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£
5. ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå`;
                }
            }

            // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£ mapping ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠ role ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
            const roleNameMapping = {
                '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ': 'General Assistant',
                '‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô': 'Business & Finance',
                '‡πÄ‡∏ä‡∏ü': 'Chef',
                '‡∏´‡∏°‡∏≠‡∏î‡∏π': 'Fortune Teller',
                '‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏î‡∏ô‡∏ï‡∏£‡∏µ': 'Music Advisor',
                '‡∏Ñ‡∏π‡πà‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô': 'Virtual Partner'
            };

            // ‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠ role ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
            const englishRoleName = roleNameMapping[roleName] || roleName;

            // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö role ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
            const roleExpertise = {
                'General Assistant': {
                    core: 'general assistance',
                    related: ['daily life', 'general knowledge', 'basic problem solving'],
                    thai: '‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'
                },
                'Business & Finance': {
                    core: 'business and financial matters',
                    related: ['economics', 'investment', 'market analysis'],
                    thai: '‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡∏•‡∏≤‡∏î'
                },
                'Chef': {
                    core: 'cooking and culinary arts',
                    related: ['food science', 'nutrition', 'meal planning'],
                    thai: '‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏±‡∏ß ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£'
                },
                'Fortune Teller': {
                    core: 'fortune telling and spiritual guidance',
                    related: ['astrology', 'tarot reading', 'life path guidance'],
                    thai: '‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì'
                },
                'Music Advisor': {
                    core: 'music and entertainment',
                    related: ['music theory', 'artist recommendations', 'music education'],
                    thai: '‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á ‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏®‡∏¥‡∏•‡∏õ‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏î‡∏ô‡∏ï‡∏£‡∏µ'
                },
                'Virtual Partner': {
                    core: 'companionship and conversation',
                    related: ['daily life discussion', 'emotional support', 'casual chat'],
                    thai: '‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à ‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô'
                }
            };

            const expertise = roleExpertise[englishRoleName];
            if (!expertise) {
                return lang === 'en' 
                    ? `You are a general AI assistant.` 
                    : `‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢ AI ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ`;
            }

            if (lang === 'en') {
                return `You are an AI assistant specialized in ${roleName}.

CRITICAL INSTRUCTIONS:
1. ALWAYS respond in English ONLY, even when users write in Thai
2. You can understand both Thai and English inputs
3. Your expertise areas include:
   - Core focus: ${expertise.core}
   - Related topics: ${expertise.related.join(', ')}
4. For questions within your expertise or related areas:
   - Provide detailed and helpful responses
   - Draw connections to your core expertise when relevant
5. For completely unrelated topics, respond:
   "I apologize, but I specialize in ${expertise.core} and related areas. For your question about [topic], please consult our other specialized assistants."
6. Maintain professional and friendly communication style`;
            } else {
                return `‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢ AI ‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô${roleName}

‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:
1. ‡∏ï‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
2. ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
   - ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏´‡∏•‡∏±‡∏Å: ${expertise.thai}
3. ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á:
   - ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå
   - ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
4. ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏¢ ‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤:
   "‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡πà‡∏∞ ‡∏î‡∏¥‡∏â‡∏±‡∏ô‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏î‡πâ‡∏≤‡∏ô${expertise.thai}‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö[topic] ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞"
5. ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£`;
            }
        }

        function createWelcomeMessage(params) {
            const { userName, roleName, language } = params;
            const isEnglish = language === 'en';
            const icon = getRoleIcon(roleName);
            
            if (isEnglish) {
                return `‚ú® Welcome ${userName}! ‚ú®

I'm your ${roleName} ${icon}
I'm here to assist you with any questions or concerns you may have.

How can I help you today?`;
            } else {
                return `‚ú® ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏Ñ‡∏∏‡∏ì${userName} ‚ú®

‡∏î‡∏¥‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ ${roleName} ${icon} ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏û‡∏ö‡∏Ñ‡πà‡∏∞
‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á

‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏î‡∏¥‡∏â‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞?`;
            }
        }

        function initializeChat() {
            const params = getUrlParams();
            
            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ò‡∏µ‡∏°‡∏ï‡∏≤‡∏° role ‡πÅ‡∏•‡∏∞ model
            const roleMapping = {
                '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ': 'general',
                '‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô': 'business',
                '‡πÄ‡∏ä‡∏ü': 'chef',
                '‡∏´‡∏°‡∏≠‡∏î‡∏π': 'fortune',
                '‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏î‡∏ô‡∏ï‡∏£‡∏µ': 'music',
                '‡∏Ñ‡∏π‡πà‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô': 'virtual-partner'
            };
            
            // ‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠ role ‡πÄ‡∏õ‡πá‡∏ô key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö theme
            const roleLower = roleMapping[params.roleName] || 'general';
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏° class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á model ‡πÅ‡∏•‡∏∞ role theme
            document.body.className = `model-${params.modelName.toLowerCase()} theme-${roleLower}`;

            // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç modelGradients object ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
            const modelGradients = {
                typhoon: 'linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%)',
                gemini: 'linear-gradient(135deg, #A6C1EE 0%, #FBC2EB 100%)'
            };

            document.documentElement.style.setProperty('--primary-gradient', 
                modelGradients[params.modelName.toLowerCase()] || modelGradients.typhoon);

            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó header
            const chatHeader = document.querySelector('.chat-header');
            if (chatHeader) {
                const icon = getRoleIcon(params.roleName);
                chatHeader.innerHTML = `${icon} ${params.modelName} - ${params.roleName}`;
            }

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° welcome message
            const welcomeMessage = createWelcomeMessage(params);
            if (welcomeMessage) {
                addMessage(welcomeMessage, false);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            initializeChat();
            
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            sendButton.addEventListener('click', sendMessage);
        });

        // Replace the direct API key usage with a fetch to get the key
        const getApiKey = async () => {
            try {
                const response = await fetch('/api/get-typhoon-key');
                const data = await response.json();
                return data.key;
            } catch (error) {
                console.error('Error fetching API key:', error);
                return null;
            }
        };

        // Update the sendMessage function
        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            const apiKey = await getApiKey();
            if (!apiKey) {
                addMessage('Error: Could not authenticate with the API', false);
                return;
            }

            try {
                addMessage(message, true);
                userInput.value = '';
                loading.style.display = 'block';

                const params = getUrlParams();
                const rolePrompt = getRolePrompt(params.roleName, params.language === 'en');
                
                const response = await fetch('https://api.opentyphoon.ai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey.replace(/['"]+/g, '').trim()}`
                    },
                    body: JSON.stringify({
                        messages: [
                            {
                                role: "system",
                                content: rolePrompt
                            },
                            {
                                role: "user",
                                content: message
                            }
                        ],
                        model: "typhoon-v1.5x-70b-instruct",
                        temperature: 0.6,
                        max_tokens: 512,
                        top_p: 0.95,
                        repetition_penalty: 1.05,
                        stream: false
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('API Response:', errorData);
                    throw new Error(errorData.error?.message || 'API Error');
                }

                const data = await response.json();
                const botResponse = data.choices[0].message.content;
                addMessage(botResponse, false);
            } catch (error) {
                console.error('Error:', error);
                addMessage(`‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢: ${error.message}`, false);
            } finally {
                loading.style.display = 'none';
            }
        }

        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Error:', {
                message: msg,
                url: url,
                line: lineNo,
                column: columnNo,
                error: error
            });
            return false;
        };

        performance.getEntriesByType('resource').forEach(entry => {
            console.log(`Resource: ${entry.name}, Duration: ${entry.duration}ms`);
        });

        function getRoleIcon(roleName) {
            const roleIcons = {
                '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ': 'ü§ñ',
                '‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à': 'üí∞',
                '‡πÄ‡∏ä‡∏ü': 'üë®‚Äçüç≥',
                '‡∏î‡∏π‡∏î‡∏ß‡∏á': 'üîÆ',
                '‡∏î‡∏ô‡∏ï‡∏£‡∏µ': 'üéµ',
                '‡∏Ñ‡∏π‡πà‡∏Ñ‡∏∏‡∏¢': 'ü´Ç',
                // English versions
                'General Assistant': 'ü§ñ',
                'Business & Finance': 'üí∞',
                'Chef': 'üë®‚Äçüç≥',
                'Fortune Teller': 'üîÆ',
                'Music Advisor': 'üéµ',
                'Virtual Partner': 'ü´Ç'
            };
            return roleIcons[roleName] || 'ÔøΩÔøΩ';
        }

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô getRolePrompt ‡∏Å‡πà‡∏≠‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô sendMessage
        function getRolePrompt(roleName, isEnglish) {
            const prompts = {
                '‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ': '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô AI ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏î‡πâ‡∏≤‡∏ô',
                'General Assistant': 'You are a general AI assistant ready to help with any topic',
                
                '‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô': '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à',
                'Business & Finance': 'You are a business and finance expert, ready to provide advice on investments, financial planning, and business management',
                
                '‡πÄ‡∏ä‡∏ü': '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ä‡∏ü‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏ô‡∏≤‡∏ô‡∏≤‡∏ä‡∏≤‡∏ï‡∏¥',
                'Chef': 'You are a professional chef specializing in Thai and international cuisine',
                
                '‡∏´‡∏°‡∏≠‡∏î‡∏π': '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏°‡∏≠‡∏î‡∏π‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏î‡πâ‡∏≤‡∏ô‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
                'Fortune Teller': 'You are a fortune teller providing guidance on life and destiny',
                
                '‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏î‡∏ô‡∏ï‡∏£‡∏µ': '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏î‡∏ô‡∏ï‡∏£‡∏µ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏î‡∏ô‡∏ï‡∏£‡∏µ ‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏î‡∏ô‡∏ï‡∏£‡∏µ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡πÄ‡∏û‡∏•‡∏á',
                'Music Advisor': 'You are a music expert providing advice on playing instruments, music theory, and composition'
            };

            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ role ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ default prompt
            return prompts[roleName] || (isEnglish ? 
                'You are a helpful AI assistant' : 
                '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô AI ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠');
        }
    </script>
</body>
</html>